/* Fonts loaded via Next.js font optimization in src/lib/fonts.ts */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   CSS Variables
   ============================================ */
:root {
  --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-display: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-arabic: 'Amiri', 'Traditional Arabic', serif;
  --font-quran: 'KFGQPC Hafs Uthmani', 'Amiri Quran', 'Amiri', serif;
  
  /* Safe Areas */
  --safe-area-top: env(safe-area-inset-top);
  --safe-area-bottom: env(safe-area-inset-bottom);
  
  /* Gold Leaf Colors - Inspired by manuscript gilding */
  --gold-leaf-light: #f4d47c;
  --gold-leaf: #c9a227;
  --gold-leaf-dark: #8b6914;
  --gold-leaf-shadow: #5a4410;
  
  /* Islamic Illumination Colors */
  --illumination-blue: #1e3a5f;
  --illumination-green: #2d4a3e;
  --illumination-red: #8b3a3a;
  
  /* HIFZ Brand Colors */
  --hifz-night-deep: #0f1419;
  --hifz-night: #1a1f25;
  --hifz-gold: #c9a227;
  --hifz-gold-light: #d4af37;
  --hifz-teal: #1a6b6b;
  --hifz-teal-light: #2d9191;
  --hifz-cream: #f5f0e1;
}

/* ============================================
   Base Styles
   ============================================ */
@layer base {
  * {
    @apply box-border;
  }
  
  html {
    @apply antialiased scroll-smooth;
    -webkit-tap-highlight-color: transparent;
    text-size-adjust: 100%;
  }
  
  body {
    @apply bg-night-950 text-night-100 min-h-screen;
    font-family: var(--font-sans);
  }
  
  /* Arabic Text Direction */
  [lang="ar"],
  .arabic-text,
  .quran-text {
    direction: rtl;
    font-family: var(--font-arabic);
  }
  
  /* Selection */
  ::selection {
    @apply bg-gold-500/30 text-night-100;
  }
  
  /* Scrollbar */
  ::-webkit-scrollbar {
    @apply w-1.5;
  }
  
  ::-webkit-scrollbar-track {
    @apply bg-night-900;
  }
  
  ::-webkit-scrollbar-thumb {
    @apply bg-night-700 rounded-full;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-night-600;
  }
}

/* ============================================
   Typography
   ============================================ */
@layer components {
  .quran-text {
    font-family: var(--font-quran);
    @apply text-2xl leading-[2.5] tracking-wide;
    direction: rtl;
  }
  
  .arabic-text {
    font-family: var(--font-arabic);
    direction: rtl;
  }
  
  .bismillah {
    font-family: var(--font-quran);
    @apply text-3xl text-gold-400 leading-relaxed;
    direction: rtl;
  }
  
  .surah-header {
    font-family: var(--font-quran);
    @apply text-4xl text-gold-400 leading-normal mb-2;
    direction: rtl;
  }
  
  .verse-number {
    font-family: var(--font-quran);
    @apply inline-flex items-center justify-center min-w-[2rem] h-8 
           rounded-full bg-gold-500/10 text-gold-400 text-base mx-2 
           align-middle;
    direction: ltr;
  }
  
  .gold-accent {
    @apply text-gold-400;
  }
  
  /* Gold Gradient Text - Manuscript inspired */
  .text-gold-gradient {
    background: linear-gradient(
      135deg,
      var(--gold-leaf-light) 0%,
      var(--gold-leaf) 50%,
      var(--gold-leaf-dark) 100%
    );
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 2px 20px rgba(201, 162, 39, 0.3);
  }
  
  /* Display heading with illumination style */
  .heading-illuminated {
    @apply font-display text-night-100;
    text-shadow: 
      0 0 40px rgba(201, 162, 39, 0.15),
      0 2px 4px rgba(0, 0, 0, 0.3);
  }
  
  /* HIFZ Brand Typography */
  .hifz-brand {
    font-weight: 700;
    letter-spacing: 0.1em;
    background: linear-gradient(
      135deg,
      var(--gold-leaf-light) 0%,
      var(--gold-leaf) 40%,
      var(--gold-leaf-light) 60%,
      var(--gold-leaf) 100%
    );
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 30px rgba(201, 162, 39, 0.3);
  }
  
  .hifz-brand-glow {
    @apply hifz-brand relative;
  }
  
  .hifz-brand-glow::after {
    content: attr(data-text);
    position: absolute;
    left: 0;
    top: 0;
    z-index: -1;
    background: linear-gradient(135deg, var(--gold-leaf) 0%, var(--gold-leaf-dark) 100%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: blur(12px);
    opacity: 0.6;
  }
}

/* ============================================
   Noise & Grain Textures
   ============================================ */
@layer components {
  /* SVG noise texture - adds depth to glass surfaces */
  .noise-texture {
    position: relative;
  }
  
  .noise-texture::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.03;
    mix-blend-mode: overlay;
    pointer-events: none;
    border-radius: inherit;
  }
  
  /* Fine grain texture */
  .grain-texture::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='grain'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23grain)'/%3E%3C/svg%3E");
    opacity: 0.015;
    mix-blend-mode: soft-light;
    pointer-events: none;
    border-radius: inherit;
  }
}

/* ============================================
   Islamic Patterns & Illumination
   ============================================ */
@layer components {
  /* 8-pointed star pattern (Rub el Hizb inspired) */
  .pattern-stars {
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='%23c9a227' stroke-width='0.5' opacity='0.15'%3E%3Cpath d='M30 5L35 25L55 30L35 35L30 55L25 35L5 30L25 25Z'/%3E%3C/g%3E%3C/svg%3E");
  }
  
  /* Arabesque scroll pattern */
  .pattern-arabesque {
    background-image: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='%23c9a227' stroke-width='0.4' opacity='0.08'%3E%3Ccircle cx='40' cy='40' r='30'/%3E%3Ccircle cx='40' cy='40' r='20'/%3E%3Ccircle cx='40' cy='40' r='10'/%3E%3Cpath d='M10 40 Q25 25 40 40 Q55 55 70 40'/%3E%3Cpath d='M40 10 Q25 25 40 40 Q55 55 40 70'/%3E%3C/g%3E%3C/svg%3E");
  }
  
  /* Geometric interlace pattern */
  .pattern-interlace {
    background-image: url("data:image/svg+xml,%3Csvg width='48' height='48' viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='%23c9a227' stroke-width='0.5' opacity='0.1'%3E%3Cpath d='M0 24h48M24 0v48M0 0l48 48M48 0L0 48'/%3E%3Crect x='12' y='12' width='24' height='24' rx='2'/%3E%3C/g%3E%3C/svg%3E");
  }
  
  /* Cross pattern overlay (very subtle) */
  .pattern-overlay {
    @apply absolute inset-0 opacity-[0.02] pointer-events-none;
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23c9a227' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  }
  
  /* Illumination border frame - manuscript inspired */
  .illumination-frame {
    position: relative;
    padding: 2rem;
  }
  
  .illumination-frame::before {
    content: '';
    position: absolute;
    inset: 0;
    border: 2px solid transparent;
    border-image: linear-gradient(
      135deg,
      var(--gold-leaf-light) 0%,
      var(--gold-leaf) 25%,
      var(--gold-leaf-dark) 50%,
      var(--gold-leaf) 75%,
      var(--gold-leaf-light) 100%
    ) 1;
    opacity: 0.6;
    border-radius: inherit;
    pointer-events: none;
  }
  
  /* Corner ornaments for frames */
  .illumination-corners {
    position: relative;
  }
  
  .illumination-corners::before,
  .illumination-corners::after {
    content: '❋';
    position: absolute;
    color: var(--gold-leaf);
    font-size: 1.5rem;
    opacity: 0.5;
    text-shadow: 0 0 10px rgba(201, 162, 39, 0.5);
  }
  
  .illumination-corners::before {
    top: -0.5rem;
    left: -0.5rem;
  }
  
  .illumination-corners::after {
    bottom: -0.5rem;
    right: -0.5rem;
  }
  
  /* Shamsa (sun medallion) style badge */
  .shamsa {
    @apply relative inline-flex items-center justify-center;
    background: radial-gradient(
      circle at center,
      rgba(201, 162, 39, 0.2) 0%,
      rgba(201, 162, 39, 0.05) 50%,
      transparent 70%
    );
  }
  
  .shamsa::before {
    content: '';
    position: absolute;
    inset: -4px;
    background: conic-gradient(
      from 0deg,
      transparent 0deg,
      rgba(201, 162, 39, 0.3) 10deg,
      transparent 20deg,
      transparent 45deg,
      rgba(201, 162, 39, 0.3) 55deg,
      transparent 65deg,
      transparent 90deg,
      rgba(201, 162, 39, 0.3) 100deg,
      transparent 110deg,
      transparent 135deg,
      rgba(201, 162, 39, 0.3) 145deg,
      transparent 155deg,
      transparent 180deg,
      rgba(201, 162, 39, 0.3) 190deg,
      transparent 200deg,
      transparent 225deg,
      rgba(201, 162, 39, 0.3) 235deg,
      transparent 245deg,
      transparent 270deg,
      rgba(201, 162, 39, 0.3) 280deg,
      transparent 290deg,
      transparent 315deg,
      rgba(201, 162, 39, 0.3) 325deg,
      transparent 335deg
    );
    border-radius: 50%;
    animation: shamsa-rotate 30s linear infinite;
    pointer-events: none;
  }
  
  @keyframes shamsa-rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
}

/* ============================================
   Buttons
   ============================================ */
@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 
           px-4 py-2 rounded-xl font-medium 
           transition-all duration-200 ease-out
           disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .btn-primary {
    @apply btn bg-gold-500 text-night-950 
           hover:bg-gold-400 active:bg-gold-600
           shadow-glow-gold;
  }
  
  .btn-outline {
    @apply btn bg-transparent border border-night-600 text-night-200
           hover:border-night-400 hover:bg-night-800/50
           active:bg-night-800;
  }
  
  .btn-ghost {
    @apply btn bg-transparent text-night-300
           hover:text-night-100 hover:bg-night-800/50
           active:bg-night-800;
  }
  
  .btn-icon {
    @apply w-10 h-10 rounded-xl flex items-center justify-center
           text-night-400 hover:text-night-100 hover:bg-night-800/50
           transition-colors;
  }
}

/* ============================================
   Cards
   ============================================ */
@layer components {
  .card {
    @apply bg-night-900/60 backdrop-blur-sm rounded-2xl 
           border border-night-800/50 shadow-card;
  }
  
  .card-gold {
    @apply card border-gold-500/20 bg-gradient-to-br 
           from-night-900/80 to-night-900/60;
  }
  
  .verse-card {
    @apply card p-5 cursor-pointer;
    transition: 
      background 0.2s ease,
      border-color 0.2s ease,
      transform 0.15s ease,
      box-shadow 0.2s ease;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Desktop hover */
  @media (hover: hover) and (pointer: fine) {
    .verse-card:hover {
      @apply border-gold-500/25 bg-night-800/50;
    }
  }
  
  .verse-card:active {
    transform: scale(0.99);
    transition-duration: 0.1s;
  }
  
  .verse-card.active {
    @apply border-gold-500/40;
    background: linear-gradient(135deg, rgba(201,162,39,0.08) 0%, rgba(201,162,39,0.03) 100%);
    box-shadow: 
      0 0 1px rgba(201,162,39,0.3),
      0 4px 20px rgba(201,162,39,0.1);
  }
  
  .lesson-card {
    @apply card p-4 transition-all duration-200
           hover:border-night-700 hover:bg-night-800/60;
  }
  
  .lesson-card.completed {
    @apply border-sage-800/50 bg-sage-950/20;
  }
  
  .lesson-card.locked {
    @apply opacity-60 cursor-not-allowed hover:border-night-800/50;
  }
}

/* ============================================
   Lesson Components
   ============================================ */
@layer components {
  .lesson-number {
    @apply w-10 h-10 rounded-xl flex items-center justify-center 
           text-sm font-semibold transition-colors flex-shrink-0;
  }
  
  .lesson-number.completed {
    @apply bg-sage-600 text-white;
  }
  
  .lesson-number.pending {
    @apply bg-gold-500/20 text-gold-400;
  }
  
  .lesson-number.locked {
    @apply bg-night-800 text-night-500;
  }
  
  .xp-badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5 
           rounded-full bg-gold-500/10 text-gold-400 
           text-xs font-medium;
  }
  
  .stat-card {
    @apply card p-4 text-center;
  }
  
  .stat-value {
    @apply text-night-100 font-bold;
  }
  
  .stat-label {
    @apply text-xs text-night-500;
  }
  
  .option-card {
    @apply card p-4 cursor-pointer transition-all duration-200
           hover:border-night-700 hover:bg-night-800/60;
  }
  
  .option-card.selected {
    @apply border-gold-500/50 bg-gold-500/5;
  }
  
  .reciter-preview {
    @apply card p-4 flex items-center gap-4 cursor-pointer
           transition-all duration-200 hover:border-night-700;
  }
  
  .reciter-preview.selected {
    @apply border-gold-500/50 bg-gold-500/5;
  }
}

/* ============================================
   Progress Bars
   ============================================ */
@layer components {
  .progress-bar {
    @apply w-full h-2 bg-night-800 rounded-full overflow-hidden;
  }
  
  .progress-bar-fill {
    @apply h-full bg-gradient-to-r from-sage-600 to-sage-500 
           rounded-full transition-all duration-300 ease-out;
  }
  
  .progress-bar-gold .progress-bar-fill {
    @apply bg-gradient-to-r from-gold-600 to-gold-400;
  }
}

/* ============================================
   Audio Player
   ============================================ */
@layer components {
  .repeat-badge {
    @apply inline-flex items-center px-2 py-1 rounded-lg 
           bg-night-800 text-night-400 text-xs font-medium
           transition-colors;
  }
  
  .repeat-badge.active {
    @apply bg-gold-500/20 text-gold-400;
  }
}

/* ============================================
   Sheets & Modals
   ============================================ */
@layer components {
  .sheet {
    @apply fixed bottom-0 left-0 right-0 
           bg-night-900 border-t border-night-800
           rounded-t-3xl z-50;
  }
  
  .sheet-handle {
    @apply w-12 h-1 bg-night-700 rounded-full mx-auto my-3;
  }
  
  .glass {
    @apply bg-night-950/80 backdrop-blur-md border-b border-night-800/50;
  }
}

/* ============================================
   Liquid Glass UI - Enhanced with Textures
   ============================================ */

/* Shimmer animation DISABLED - distraction-free reading
@keyframes liquid-shimmer {
  0% { transform: translateX(-100%) rotate(12deg); }
  100% { transform: translateX(200%) rotate(12deg); }
}
*/

@keyframes glass-breathe {
  0%, 100% { opacity: 0.03; }
  50% { opacity: 0.06; }
}

@keyframes refraction-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes aurora {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@layer components {
  /* Primary liquid glass - Premium iOS-style smooth frosted glass */
  .liquid-glass {
    @apply relative overflow-hidden;
    background: rgba(22, 27, 34, 0.72);
    backdrop-filter: blur(48px) saturate(180%);
    -webkit-backdrop-filter: blur(48px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.06);
    box-shadow: 
      0 1px 3px rgba(0, 0, 0, 0.12),
      0 8px 24px rgba(0, 0, 0, 0.16);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Smooth top edge highlight - subtle, not harsh */
  .liquid-glass::before {
    content: '';
    position: absolute;
    top: 0;
    left: 5%;
    right: 5%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.08) 30%,
      rgba(255, 255, 255, 0.12) 50%,
      rgba(255, 255, 255, 0.08) 70%,
      transparent 100%
    );
    pointer-events: none;
    border-radius: 1px;
  }
  
  /* Subtle inner glow for depth - very smooth */
  .liquid-glass::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      radial-gradient(
        ellipse 100% 50% at 50% 0%,
        rgba(255, 255, 255, 0.02) 0%,
        transparent 50%
      );
    pointer-events: none;
    border-radius: inherit;
  }
  
  /* Subtle variant for cards - smooth, no harsh edges */
  .liquid-glass-subtle {
    @apply relative overflow-hidden;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.028) 0%,
      rgba(255, 255, 255, 0.012) 100%
    );
    backdrop-filter: blur(20px) saturate(150%);
    -webkit-backdrop-filter: blur(20px) saturate(150%);
    border: 1px solid rgba(255, 255, 255, 0.04);
    box-shadow: 
      0 2px 8px rgba(0, 0, 0, 0.08),
      0 4px 16px rgba(0, 0, 0, 0.06);
    transition: all 0.25s ease;
  }
  
  .liquid-glass-subtle::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(
      ellipse 80% 40% at 50% 0%,
      rgba(255, 255, 255, 0.015) 0%,
      transparent 60%
    );
    pointer-events: none;
    border-radius: inherit;
  }
  
  /* Strong variant for modals, floating elements - smooth depth */
  .liquid-glass-strong {
    @apply relative overflow-hidden;
    background: linear-gradient(
      180deg,
      rgba(28, 33, 40, 0.92) 0%,
      rgba(22, 27, 34, 0.96) 100%
    );
    backdrop-filter: blur(48px) saturate(180%);
    -webkit-backdrop-filter: blur(48px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 
      0 4px 16px rgba(0, 0, 0, 0.15),
      0 12px 40px rgba(0, 0, 0, 0.2);
  }
  
  .liquid-glass-strong::before {
    content: '';
    position: absolute;
    top: 0;
    left: 10%;
    right: 10%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.1) 50%,
      transparent 100%
    );
    pointer-events: none;
  }
  
  /* Dark variant for dark mode accents - smooth */
  .liquid-glass-dark {
    @apply relative overflow-hidden;
    background: linear-gradient(
      135deg,
      rgba(12, 15, 20, 0.85) 0%,
      rgba(8, 10, 14, 0.9) 100%
    );
    backdrop-filter: blur(24px) saturate(160%);
    -webkit-backdrop-filter: blur(24px) saturate(160%);
    border: 1px solid rgba(255, 255, 255, 0.04);
    box-shadow: 
      0 2px 12px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.03);
  }
  
  /* Gold tinted glass for special elements - smooth, warm glow */
  .liquid-glass-gold {
    @apply relative overflow-hidden;
    background: linear-gradient(
      135deg,
      rgba(201, 162, 39, 0.1) 0%,
      rgba(201, 162, 39, 0.04) 50%,
      rgba(201, 162, 39, 0.06) 100%
    );
    backdrop-filter: blur(24px) saturate(160%);
    -webkit-backdrop-filter: blur(24px) saturate(160%);
    border: 1px solid rgba(201, 162, 39, 0.15);
    box-shadow: 
      0 2px 12px rgba(0, 0, 0, 0.1),
      0 8px 32px rgba(0, 0, 0, 0.12),
      0 0 1px rgba(201, 162, 39, 0.2);
    transition: all 0.3s ease;
  }
  
  .liquid-glass-gold::before {
    content: '';
    position: absolute;
    top: 0;
    left: 10%;
    right: 10%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(244, 212, 124, 0.15) 50%,
      transparent 100%
    );
    pointer-events: none;
  }
  
  .liquid-glass-gold::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(
      ellipse 80% 40% at 50% 0%,
      rgba(201, 162, 39, 0.06) 0%,
      transparent 60%
    );
    pointer-events: none;
    border-radius: inherit;
  }
  
  /* Premium gold glass with elegant illumination - smooth depth */
  .liquid-glass-gold-premium {
    @apply relative overflow-hidden;
    background: 
      radial-gradient(ellipse 60% 40% at 30% 0%, rgba(244, 212, 124, 0.12) 0%, transparent 50%),
      radial-gradient(ellipse 60% 40% at 70% 100%, rgba(201, 162, 39, 0.08) 0%, transparent 50%),
      linear-gradient(
        135deg,
        rgba(201, 162, 39, 0.1) 0%,
        rgba(139, 105, 20, 0.05) 50%,
        rgba(201, 162, 39, 0.08) 100%
      );
    backdrop-filter: blur(32px) saturate(180%);
    -webkit-backdrop-filter: blur(32px) saturate(180%);
    border: 1px solid rgba(201, 162, 39, 0.18);
    box-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.15),
      0 12px 48px rgba(0, 0, 0, 0.12),
      0 0 2px rgba(201, 162, 39, 0.15);
  }
  
  .liquid-glass-gold-premium::before {
    content: '';
    position: absolute;
    top: 0;
    left: 5%;
    right: 5%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(244, 212, 124, 0.2) 50%,
      transparent 100%
    );
    pointer-events: none;
  }
  
  /* Floating pill button (like iOS action buttons) */
  .liquid-pill {
    @apply px-5 py-2.5 rounded-full;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.05) 100%
    );
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 
      0 4px 16px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.15);
    transition: all 0.2s ease;
  }
  
  .liquid-pill:hover {
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.15) 0%,
      rgba(255, 255, 255, 0.08) 100%
    );
    box-shadow: 
      0 6px 20px rgba(0, 0, 0, 0.25),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }
  
  .liquid-pill:active {
    transform: scale(0.98);
  }
  
  /* Floating bottom sheet - smooth, no harsh edges */
  .liquid-sheet {
    @apply rounded-t-3xl;
    background: linear-gradient(
      180deg,
      rgba(26, 31, 38, 0.97) 0%,
      rgba(20, 25, 32, 0.99) 100%
    );
    backdrop-filter: blur(48px) saturate(180%);
    -webkit-backdrop-filter: blur(48px) saturate(180%);
    border-top: 1px solid rgba(255, 255, 255, 0.06);
    box-shadow: 
      0 -4px 24px rgba(0, 0, 0, 0.25),
      0 -12px 48px rgba(0, 0, 0, 0.15);
  }
  
  .liquid-sheet::before {
    content: '';
    position: absolute;
    top: 0;
    left: 10%;
    right: 10%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.08) 50%,
      transparent 100%
    );
    pointer-events: none;
  }
  
  /* Floating nav bar - smooth frosted glass */
  .liquid-nav {
    @apply rounded-2xl mx-4 mb-4;
    background: rgba(26, 31, 38, 0.85);
    backdrop-filter: blur(48px) saturate(180%);
    -webkit-backdrop-filter: blur(48px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.06);
    box-shadow: 
      0 4px 20px rgba(0, 0, 0, 0.2),
      0 8px 32px rgba(0, 0, 0, 0.15);
  }
  
  .liquid-nav::before {
    content: '';
    position: absolute;
    top: 0;
    left: 5%;
    right: 5%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.06) 50%,
      transparent 100%
    );
    pointer-events: none;
    border-radius: inherit;
  }
  
  /* Liquid card for content */
  .liquid-card {
    @apply rounded-2xl p-4 relative;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.04) 0%,
      rgba(255, 255, 255, 0.01) 100%
    );
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.06);
    box-shadow: 
      0 4px 16px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }
  
  /* Interactive liquid card with smooth hover state */
  .liquid-card-interactive {
    @apply liquid-card cursor-pointer;
    position: relative;
    transition: 
      transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 0.25s cubic-bezier(0.4, 0, 0.2, 1),
      border-color 0.25s ease,
      background 0.25s ease;
    -webkit-tap-highlight-color: transparent;
  }
  
  .liquid-card-interactive::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: radial-gradient(
      ellipse 80% 50% at 50% 0%,
      rgba(255, 255, 255, 0.04) 0%,
      transparent 60%
    );
    opacity: 0;
    transition: opacity 0.25s ease;
    pointer-events: none;
  }
  
  /* Desktop hover only */
  @media (hover: hover) and (pointer: fine) {
    .liquid-card-interactive:hover::before {
      opacity: 1;
    }
    
    .liquid-card-interactive:hover {
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.06) 0%,
        rgba(255, 255, 255, 0.02) 100%
      );
      border-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-3px);
      box-shadow: 
        0 8px 24px rgba(0, 0, 0, 0.18),
        0 16px 48px rgba(0, 0, 0, 0.1);
    }
  }
  
  /* Touch/tap feedback */
  .liquid-card-interactive:active {
    transform: scale(0.98);
    transition-duration: 0.1s;
  }
  
  /* Liquid Glass Button (Primary) - Premium smooth gold */
  .liquid-btn {
    @apply relative inline-flex items-center justify-center gap-2 
           px-6 py-3 rounded-2xl font-semibold text-sm
           cursor-pointer overflow-hidden;
    background: linear-gradient(
      135deg,
      rgba(212, 175, 55, 1) 0%,
      rgba(201, 162, 39, 1) 50%,
      rgba(180, 140, 30, 1) 100%
    );
    color: #0a0a0f;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 
      0 2px 8px rgba(201, 162, 39, 0.25),
      0 8px 24px rgba(201, 162, 39, 0.2);
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.15);
    transition: 
      transform 0.2s cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 0.2s ease,
      filter 0.2s ease;
    -webkit-tap-highlight-color: transparent;
  }
  
  .liquid-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 10%;
    right: 10%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.35) 50%,
      transparent 100%
    );
    pointer-events: none;
  }
  
  /* Desktop hover */
  @media (hover: hover) and (pointer: fine) {
    .liquid-btn:hover {
      box-shadow: 
        0 4px 16px rgba(201, 162, 39, 0.35),
        0 12px 32px rgba(201, 162, 39, 0.25);
      filter: brightness(1.05);
    }
  }
  
  .liquid-btn:active {
    transform: scale(0.97);
    box-shadow: 
      0 2px 8px rgba(201, 162, 39, 0.2),
      0 4px 16px rgba(201, 162, 39, 0.15);
    transition-duration: 0.1s;
  }
  
  .liquid-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }
  
  /* Liquid Glass Button (Secondary/Outline) - Smooth ghost style */
  .liquid-btn-outline {
    @apply relative inline-flex items-center justify-center gap-2 
           px-6 py-3 rounded-2xl font-semibold text-sm
           cursor-pointer;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.06) 0%,
      rgba(255, 255, 255, 0.02) 100%
    );
    color: #e5e5e5;
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: 
      0 2px 8px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.06);
    transition: 
      background 0.2s ease,
      border-color 0.2s ease,
      box-shadow 0.2s ease,
      transform 0.15s ease;
    -webkit-tap-highlight-color: transparent;
  }
  
  .liquid-btn-outline::before {
    content: '';
    position: absolute;
    top: 0;
    left: 10%;
    right: 10%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.06) 50%,
      transparent 100%
    );
    pointer-events: none;
  }
  
  /* Desktop hover */
  @media (hover: hover) and (pointer: fine) {
    .liquid-btn-outline:hover {
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.09) 0%,
        rgba(255, 255, 255, 0.04) 100%
      );
      border-color: rgba(255, 255, 255, 0.15);
      box-shadow: 
        0 4px 16px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.08);
    }
  }
  
  .liquid-btn-outline:active {
    transform: scale(0.97);
    transition-duration: 0.1s;
  }
  
  .liquid-btn-outline:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }
  
  /* Liquid Glass Input */
  .liquid-input {
    @apply w-full px-4 py-3 rounded-xl text-night-100 
           placeholder:text-night-500 transition-all duration-300;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.05) 0%,
      rgba(255, 255, 255, 0.02) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: 
      inset 0 2px 4px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }
  
  .liquid-input:focus {
    outline: none;
    border-color: rgba(201, 162, 39, 0.5);
    box-shadow: 
      0 0 0 3px rgba(201, 162, 39, 0.15),
      inset 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  /* Liquid Glass Tabs */
  .liquid-tabs {
    @apply inline-flex p-1 rounded-xl;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.04) 0%,
      rgba(255, 255, 255, 0.01) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
  
  .liquid-tab {
    @apply px-4 py-2 rounded-lg text-sm font-medium 
           text-night-400 transition-all duration-300;
  }
  
  .liquid-tab:hover {
    @apply text-night-200;
  }
  
  .liquid-tab.active {
    @apply text-night-100;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.05) 100%
    );
    box-shadow: 
      0 2px 8px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }
  
  /* Liquid Badge */
  .liquid-badge {
    @apply inline-flex items-center gap-1.5 px-3 py-1 
           rounded-full text-xs font-semibold;
    background: linear-gradient(
      135deg,
      rgba(201, 162, 39, 0.2) 0%,
      rgba(201, 162, 39, 0.1) 100%
    );
    color: #c9a227;
    border: 1px solid rgba(201, 162, 39, 0.2);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  
  /* Liquid Divider */
  .liquid-divider {
    @apply w-full h-px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.1) 50%,
      transparent 100%
    );
  }
  
  /* Gold divider with ornament style */
  .liquid-divider-gold {
    @apply w-full h-px relative;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(201, 162, 39, 0.3) 20%,
      rgba(201, 162, 39, 0.5) 50%,
      rgba(201, 162, 39, 0.3) 80%,
      transparent 100%
    );
  }
  
  .liquid-divider-gold::before {
    content: '◆';
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    color: rgba(201, 162, 39, 0.6);
    font-size: 0.5rem;
    background: var(--night-950, #0f1419);
    padding: 0 0.5rem;
  }
  
  /* Liquid Glass Modal/Drawer */
  .liquid-modal {
    @apply rounded-3xl overflow-hidden;
    background: linear-gradient(
      180deg,
      rgba(25, 25, 30, 0.95) 0%,
      rgba(20, 20, 25, 0.98) 100%
    );
    backdrop-filter: blur(40px) saturate(200%);
    -webkit-backdrop-filter: blur(40px) saturate(200%);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 
      0 24px 80px rgba(0, 0, 0, 0.5),
      0 8px 32px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }
  
  .liquid-modal::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 120px;
    background: radial-gradient(
      ellipse at 50% 0%,
      rgba(201, 162, 39, 0.06) 0%,
      transparent 70%
    );
    pointer-events: none;
  }
  
  /* Liquid Icon Button - Meets 44x44 touch target minimum */
  .liquid-icon-btn {
    @apply w-11 h-11 min-w-[44px] min-h-[44px] rounded-xl flex items-center justify-center;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.05) 0%,
      rgba(255, 255, 255, 0.02) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    color: #9ca3af;
    transition: 
      background 0.2s ease,
      border-color 0.2s ease,
      color 0.2s ease,
      transform 0.15s ease;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Desktop hover */
  @media (hover: hover) and (pointer: fine) {
    .liquid-icon-btn:hover {
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0.08) 0%,
        rgba(255, 255, 255, 0.04) 100%
      );
      border-color: rgba(255, 255, 255, 0.1);
      color: #e5e5e5;
    }
  }
  
  .liquid-icon-btn:active {
    transform: scale(0.94);
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.06) 100%
    );
  }
  
  .liquid-icon-btn.active {
    background: linear-gradient(
      135deg,
      rgba(201, 162, 39, 0.15) 0%,
      rgba(201, 162, 39, 0.08) 100%
    );
    border-color: rgba(201, 162, 39, 0.2);
    color: #c9a227;
  }
  
  /* Liquid Progress Bar */
  .liquid-progress {
    @apply w-full h-2 rounded-full overflow-hidden;
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.05) 0%,
      rgba(255, 255, 255, 0.02) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.05);
  }
  
  .liquid-progress-fill {
    @apply h-full rounded-full transition-all duration-500 ease-out;
    background: linear-gradient(
      90deg,
      rgba(201, 162, 39, 0.8) 0%,
      rgba(201, 162, 39, 1) 50%,
      rgba(220, 180, 50, 1) 100%
    );
    box-shadow: 
      0 0 12px rgba(201, 162, 39, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
    background-size: 200% 100%;
    animation: refraction-shift 3s ease infinite;
  }
  
  /* Liquid Tooltip */
  .liquid-tooltip {
    @apply px-3 py-2 rounded-lg text-xs font-medium text-night-100;
    background: linear-gradient(
      135deg,
      rgba(50, 50, 55, 0.95) 0%,
      rgba(40, 40, 45, 0.98) 100%
    );
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  }
}

/* ============================================
   Backgrounds - Enhanced with depth
   ============================================ */
@layer components {
  .bg-gradient-divine {
    background: 
      radial-gradient(ellipse at 20% 0%, rgba(30, 58, 95, 0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 100%, rgba(45, 74, 62, 0.1) 0%, transparent 50%),
      linear-gradient(
        180deg,
        #0a0e14 0%,
        #0f1419 30%,
        #121820 50%,
        #0f1419 70%,
        #0a0e14 100%
      );
  }
  
  /* Warm divine background with gold undertones */
  .bg-gradient-divine-warm {
    background: 
      radial-gradient(ellipse at 30% 0%, rgba(201, 162, 39, 0.05) 0%, transparent 50%),
      radial-gradient(ellipse at 70% 100%, rgba(78, 122, 81, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 50% 50%, rgba(30, 58, 95, 0.08) 0%, transparent 70%),
      linear-gradient(
        180deg,
        #0a0e14 0%,
        #0f1419 100%
      );
  }
  
  /* Aurora-like animated background */
  .bg-aurora {
    background: 
      radial-gradient(ellipse at 20% 30%, rgba(201, 162, 39, 0.08) 0%, transparent 40%),
      radial-gradient(ellipse at 80% 70%, rgba(78, 122, 81, 0.06) 0%, transparent 40%),
      radial-gradient(ellipse at 50% 50%, rgba(30, 58, 95, 0.1) 0%, transparent 60%),
      linear-gradient(180deg, #0a0e14 0%, #0f1419 100%);
    background-size: 200% 200%;
    animation: aurora 15s ease infinite;
  }
}

/* ============================================
   Safe Areas
   ============================================ */
@layer utilities {
  .safe-area-top {
    padding-top: max(1rem, env(safe-area-inset-top));
  }
  
  .safe-area-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
  
  .pb-safe {
    padding-bottom: max(1.5rem, env(safe-area-inset-bottom));
  }
}

/* ============================================
   Range Input
   ============================================ */
input[type="range"] {
  @apply w-full h-2 bg-night-800 rounded-full appearance-none cursor-pointer;
}

input[type="range"]::-webkit-slider-thumb {
  @apply appearance-none w-5 h-5 bg-gold-500 rounded-full 
         cursor-pointer shadow-lg transition-transform
         hover:scale-110 active:scale-95;
}

input[type="range"]::-moz-range-thumb {
  @apply w-5 h-5 bg-gold-500 rounded-full border-0
         cursor-pointer shadow-lg transition-transform
         hover:scale-110 active:scale-95;
}

/* ============================================
   Focus States
   ============================================ */
@layer components {
  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 
           focus-visible:ring-gold-500/50 focus-visible:ring-offset-2 
           focus-visible:ring-offset-night-950;
  }
}

/* ============================================
   Animations
   ============================================ */
@layer utilities {
  .animate-in {
    animation: fade-in 0.3s ease-out, slide-up 0.3s ease-out;
  }
}

/* ============================================
   Arabic Text Enhancements
   ============================================ */
@layer components {
  /* Large Arabic letter display */
  .arabic-letter-display {
    font-family: var(--font-arabic);
    direction: rtl;
    text-align: center;
    line-height: 1.2;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
  }
  
  /* Arabic text with proper spacing */
  .arabic-word {
    font-family: var(--font-arabic);
    direction: rtl;
    letter-spacing: 0.02em;
    word-spacing: 0.1em;
  }
  
  /* Inline Arabic text in English context */
  .arabic-inline {
    font-family: var(--font-arabic);
    direction: rtl;
    unicode-bidi: isolate;
    @apply text-gold-300;
  }
}

/* ============================================
   Content Block Styles
   ============================================ */
@layer components {
  /* Memory Trick Card */
  .memory-trick-card {
    @apply bg-gradient-to-r from-gold-900/20 via-gold-900/10 to-transparent 
           border border-gold-500/20 rounded-xl p-4 my-4;
  }
  
  /* Practice Prompt Card */
  .practice-card {
    @apply bg-sage-900/20 border border-sage-700/30 rounded-xl p-4 my-4;
  }
  
  /* Important Callout */
  .callout-important {
    @apply bg-amber-900/20 border-l-4 border-amber-500/50 rounded-r-xl p-4 my-4;
  }
  
  /* Quran Reference Card */
  .quran-reference {
    @apply bg-night-900/60 border border-night-700/50 rounded-2xl p-5 my-5;
  }
  
  /* Unit Progress Card */
  .unit-card {
    @apply rounded-2xl border overflow-hidden transition-all duration-200;
  }
  
  .unit-card.active {
    @apply bg-gold-900/10 border-gold-500/30;
  }
  
  .unit-card.complete {
    @apply bg-green-900/10 border-green-700/30;
  }
  
  .unit-card.locked {
    @apply bg-night-900/30 border-night-800/50 opacity-60;
  }
}

/* ============================================
   Lesson Journey Styles
   ============================================ */
@layer components {
  /* Journey Stage Node */
  .journey-node {
    @apply relative w-12 h-12 rounded-full flex items-center justify-center
           text-white shadow-lg;
  }
  
  .journey-node.active {
    @apply ring-4 ring-gold-500/30;
  }
  
  .journey-node.complete {
    @apply ring-4 ring-green-500/30;
  }
  
  /* Bismillah Styling */
  .bismillah-header {
    @apply text-center pt-2 mb-8;
  }
  
  .bismillah-text {
    font-family: var(--font-quran);
    @apply text-2xl text-gold-400 leading-relaxed;
    direction: rtl;
  }
  
  /* Dua Card */
  .dua-card {
    @apply bg-gradient-to-br from-sage-900/30 to-sage-950/40 
           border border-sage-800/30 rounded-2xl p-4 mb-6;
  }
}

/* ============================================
   Audio Button Pulse Animation
   ============================================ */
@keyframes audio-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(201, 162, 39, 0.4);
  }
  50% {
    box-shadow: 0 0 0 12px rgba(201, 162, 39, 0);
  }
}

.audio-playing {
  animation: audio-pulse 1s ease-out infinite;
}

/* ============================================
   Word-by-Word Highlighting
   ============================================ */
@layer components {
  .word-by-word-container {
    @apply relative;
  }
  
  .word-item {
    @apply cursor-pointer select-none;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  
  .word-item:active {
    transform: scale(0.95);
  }
  
  @media (hover: none) {
    .word-item:hover {
      background: transparent;
    }
  }
  
  /* Smooth word highlight transition */
  .word-highlight-enter {
    animation: word-highlight-in 0.2s ease-out forwards;
  }
  
  .word-highlight-exit {
    animation: word-highlight-out 0.15s ease-in forwards;
  }
  
  @keyframes word-highlight-in {
    from {
      background-color: transparent;
      transform: scale(1);
    }
    to {
      background-color: rgba(201, 162, 39, 0.3);
      transform: scale(1.05);
    }
  }
  
  @keyframes word-highlight-out {
    from {
      background-color: rgba(201, 162, 39, 0.3);
      transform: scale(1.05);
    }
    to {
      background-color: transparent;
      transform: scale(1);
    }
  }
}

/* ============================================
   Tajweed Practice Styles
   ============================================ */
@layer components {
  .tajweed-excellent {
    @apply bg-gradient-to-r from-gold-500 to-gold-600 text-night-950;
  }
  
  .tajweed-good {
    @apply bg-gradient-to-r from-sage-500 to-sage-600 text-night-950;
  }
  
  .tajweed-practice {
    @apply bg-gradient-to-r from-night-600 to-night-700 text-night-200;
  }
  
  /* Recording pulse animation */
  @keyframes recording-pulse {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
    }
    50% {
      box-shadow: 0 0 0 20px rgba(239, 68, 68, 0);
    }
  }
  
  .recording-active {
    animation: recording-pulse 1.5s ease-in-out infinite;
  }
  
  /* Audio waveform animation */
  .audio-bar {
    @apply w-1 bg-gold-500 rounded-full transition-all duration-75;
  }
  
  /* Sage glow for practice elements */
  .shadow-glow-sage {
    box-shadow: 0 0 20px rgba(134, 169, 113, 0.3),
                0 4px 16px rgba(0, 0, 0, 0.2);
  }
}

/* ============================================
   Celebration Particles
   ============================================ */
@keyframes confetti-fall {
  0% {
    transform: translateY(-100%) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

.confetti-particle {
  animation: confetti-fall 1.5s ease-out forwards;
}

/* ============================================
   XP Badge Animation
   ============================================ */
@keyframes xp-pop {
  0% {
    transform: scale(0) translateY(20px);
    opacity: 0;
  }
  50% {
    transform: scale(1.2) translateY(-10px);
    opacity: 1;
  }
  100% {
    transform: scale(1) translateY(-40px);
    opacity: 0;
  }
}

.xp-animation {
  animation: xp-pop 1.5s ease-out forwards;
}

/* ============================================
   Exercise Option Cards
   ============================================ */
@layer components {
  .exercise-option {
    @apply w-full p-4 rounded-xl transition-all duration-200;
    @apply bg-night-800/50 border border-night-700;
    @apply hover:bg-night-800 hover:border-night-600;
    @apply active:scale-[0.99];
  }
  
  .exercise-option.selected {
    @apply bg-gold-900/30 border-2 border-gold-500;
    @apply shadow-glow-gold;
  }
  
  .exercise-option.correct {
    @apply bg-green-900/50 border-2 border-green-500;
  }
  
  .exercise-option.incorrect {
    @apply bg-red-900/50 border-2 border-red-500;
  }
}

/* ============================================
   Progress Enhancements
   ============================================ */
@layer components {
  .progress-step {
    @apply w-2 h-2 rounded-full transition-all duration-300;
  }
  
  .progress-step.active {
    @apply w-6 bg-gold-500;
  }
  
  .progress-step.complete {
    @apply bg-sage-500;
  }
  
  .progress-step.pending {
    @apply bg-night-700;
  }
}

/* ============================================
   Glow Effects - Enhanced
   ============================================ */
@layer utilities {
  .text-glow-gold {
    text-shadow: 
      0 0 10px rgba(201, 162, 39, 0.4),
      0 0 30px rgba(201, 162, 39, 0.3),
      0 0 50px rgba(201, 162, 39, 0.2);
  }
  
  .text-glow-soft {
    text-shadow: 0 0 20px rgba(201, 162, 39, 0.25);
  }
  
  .box-glow-gold {
    box-shadow: 
      0 0 20px rgba(201, 162, 39, 0.2),
      0 0 40px rgba(201, 162, 39, 0.1);
  }
  
  .box-glow-gold-strong {
    box-shadow: 
      0 0 30px rgba(201, 162, 39, 0.3),
      0 0 60px rgba(201, 162, 39, 0.15),
      0 0 100px rgba(201, 162, 39, 0.08);
  }
}

/* ============================================
   Liquid Glass - Enhanced Animations
   ============================================ */

/* Subtle float animation for cards */
@keyframes liquid-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

/* Glow pulse for active elements */
@keyframes glow-pulse {
  0%, 100% { 
    box-shadow: 0 0 20px rgba(201, 162, 39, 0.3),
                0 4px 16px rgba(0, 0, 0, 0.2);
  }
  50% { 
    box-shadow: 0 0 30px rgba(201, 162, 39, 0.5),
                0 8px 24px rgba(0, 0, 0, 0.25);
  }
}

/* Ripple effect for interactive elements */
@keyframes liquid-ripple {
  0% { transform: scale(0.95); opacity: 0; }
  50% { opacity: 0.3; }
  100% { transform: scale(1.5); opacity: 0; }
}

/* Subtle shimmer for premium elements */
@keyframes premium-shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

/* Star twinkle animation */
@keyframes star-twinkle {
  0%, 100% { opacity: 0.3; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.2); }
}

@layer components {
  /* Floating card effect */
  .liquid-float {
    animation: liquid-float 4s ease-in-out infinite;
  }
  
  /* Glow pulse effect */
  .liquid-glow-pulse {
    animation: glow-pulse 2s ease-in-out infinite;
  }
  
  /* Premium shimmer text */
  .liquid-shimmer-text {
    background: linear-gradient(
      90deg,
      var(--gold-leaf-dark) 0%,
      var(--gold-leaf-light) 25%,
      var(--gold-leaf) 50%,
      var(--gold-leaf-light) 75%,
      var(--gold-leaf-dark) 100%
    );
    background-size: 200% auto;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: premium-shimmer 4s linear infinite;
  }
  
  /* Sage glass variant */
  .liquid-glass-sage {
    @apply relative overflow-hidden;
    background: linear-gradient(
      135deg,
      rgba(134, 169, 113, 0.08) 0%,
      rgba(134, 169, 113, 0.02) 50%,
      rgba(134, 169, 113, 0.06) 100%
    );
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(134, 169, 113, 0.15);
    box-shadow: 
      0 4px 24px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 rgba(134, 169, 113, 0.2);
  }
  
  /* Interactive states for liquid elements */
  .liquid-interactive {
    @apply transition-all duration-300 ease-out;
  }
  
  .liquid-interactive:hover {
    transform: translateY(-2px);
    box-shadow: 
      0 12px 40px rgba(0, 0, 0, 0.25),
      0 4px 12px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.12);
  }
  
  .liquid-interactive:active {
    transform: translateY(0);
    transition-duration: 0.1s;
  }
  
  /* Focus ring for liquid elements */
  .liquid-focus:focus-visible {
    outline: none;
    box-shadow: 
      0 0 0 3px rgba(201, 162, 39, 0.3),
      0 4px 16px rgba(0, 0, 0, 0.2);
  }
  
  /* Skeleton loader with liquid glass effect */
  .liquid-skeleton {
    @apply relative overflow-hidden;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.04) 0%,
      rgba(255, 255, 255, 0.02) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.04);
  }
  
  .liquid-skeleton::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.05) 50%,
      transparent 100%
    );
    animation: liquid-shimmer 1.5s ease-in-out infinite;
    background-size: 200% 100%;
  }
  
  /* Notification dot with glow */
  .liquid-dot {
    @apply w-2.5 h-2.5 rounded-full;
    background: linear-gradient(135deg, rgba(201, 162, 39, 1) 0%, rgba(220, 180, 50, 1) 100%);
    box-shadow: 0 0 8px rgba(201, 162, 39, 0.6);
  }
  
  /* Compact badge for counts */
  .liquid-count {
    @apply inline-flex items-center justify-center min-w-[1.25rem] h-5 px-1.5 
           rounded-full text-xs font-semibold;
    background: linear-gradient(135deg, rgba(201, 162, 39, 0.9) 0%, rgba(180, 140, 30, 1) 100%);
    color: #0a0a0f;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 2px 8px rgba(201, 162, 39, 0.3);
  }
  
  /* Toggle switch with liquid glass */
  .liquid-toggle {
    @apply relative w-12 h-7 rounded-full cursor-pointer transition-all duration-300;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.05) 0%,
      rgba(255, 255, 255, 0.02) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .liquid-toggle::after {
    content: '';
    @apply absolute top-1 left-1 w-5 h-5 rounded-full transition-all duration-300;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(240, 240, 240, 1) 100%);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }
  
  .liquid-toggle.active {
    background: linear-gradient(
      135deg,
      rgba(201, 162, 39, 0.3) 0%,
      rgba(201, 162, 39, 0.2) 100%
    );
    border-color: rgba(201, 162, 39, 0.4);
  }
  
  .liquid-toggle.active::after {
    transform: translateX(1.25rem);
    background: linear-gradient(135deg, rgba(201, 162, 39, 1) 0%, rgba(220, 180, 50, 1) 100%);
  }
  
  /* Chip/tag with liquid glass */
  .liquid-chip {
    @apply inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full 
           text-xs font-medium transition-all duration-200;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.06) 0%,
      rgba(255, 255, 255, 0.02) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.08);
    color: #a0a0a0;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  
  .liquid-chip:hover {
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.05) 100%
    );
    border-color: rgba(255, 255, 255, 0.15);
    color: #e5e5e5;
  }
  
  .liquid-chip.selected {
    background: linear-gradient(
      135deg,
      rgba(201, 162, 39, 0.2) 0%,
      rgba(201, 162, 39, 0.1) 100%
    );
    border-color: rgba(201, 162, 39, 0.3);
    color: #c9a227;
  }
  
  /* Stat card optimized for hifz tracking */
  .liquid-stat {
    @apply text-center p-4 rounded-2xl relative overflow-hidden;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.04) 0%,
      rgba(255, 255, 255, 0.01) 100%
    );
    border: 1px solid rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: 
      0 4px 16px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }
  
  .liquid-stat-value {
    @apply text-2xl font-bold text-night-100;
  }
  
  .liquid-stat-label {
    @apply text-xs text-night-500 font-medium mt-1;
  }
}

/* ============================================
   Responsive Liquid Glass Adjustments
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  .liquid-glass::before,
  .liquid-glass::after,
  .liquid-shimmer,
  .liquid-float,
  .liquid-glow-pulse,
  .liquid-shimmer-text,
  .shamsa::before {
    animation: none;
  }
  
  .liquid-card-interactive:hover {
    transform: none;
  }
}

/* Touch device optimizations */
@media (hover: none) {
  .liquid-card-interactive:hover {
    transform: none;
    background: inherit;
    border-color: inherit;
  }
  
  .liquid-card-interactive:active {
    transform: scale(0.98);
  }
}

/* ============================================
   Accessibility Enhancements
   ============================================ */
@layer utilities {
  /* Skip link for keyboard navigation */
  .skip-link {
    @apply absolute -top-10 left-4 z-[100] px-4 py-2 
           bg-gold-500 text-night-950 font-semibold rounded-lg
           transition-all duration-200;
  }
  
  .skip-link:focus {
    @apply top-4;
  }
  
  /* Enhanced focus indicators */
  .focus-visible-ring {
    @apply focus:outline-none focus-visible:ring-2 
           focus-visible:ring-gold-500/70 focus-visible:ring-offset-2 
           focus-visible:ring-offset-night-950;
  }
  
  /* High contrast focus for buttons */
  .btn:focus-visible,
  .liquid-btn:focus-visible,
  .liquid-btn-outline:focus-visible {
    @apply ring-2 ring-gold-400 ring-offset-2 ring-offset-night-950 outline-none;
  }
  
  /* Keyboard navigation indicators */
  [data-focus-visible-added] {
    @apply ring-2 ring-gold-500/70 ring-offset-2 ring-offset-night-950;
  }
}

/* ============================================
   Mobile-First Polish
   ============================================ */
@layer utilities {
  /* Minimum touch target size (44x44px per WCAG) */
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }
  
  /* Safe touch target with padding */
  .touch-target-safe {
    @apply min-h-[48px] min-w-[48px] p-2;
  }
  
  /* Responsive text scaling */
  .text-responsive-sm {
    @apply text-xs sm:text-sm;
  }
  
  .text-responsive-base {
    @apply text-sm sm:text-base;
  }
  
  .text-responsive-lg {
    @apply text-base sm:text-lg md:text-xl;
  }
  
  .text-responsive-xl {
    @apply text-lg sm:text-xl md:text-2xl;
  }
  
  /* Mobile-friendly spacing */
  .mobile-padding {
    @apply px-4 sm:px-6 lg:px-8;
  }
  
  .mobile-section {
    @apply py-12 sm:py-16 md:py-20;
  }
}

/* ============================================
   Smooth Scroll & Page Transitions
   ============================================ */
@layer base {
  /* Smooth scrolling with reduced motion support */
  html {
    scroll-behavior: smooth;
  }
  
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* Page transition wrapper */
.page-transition-enter {
  opacity: 0;
  transform: translateY(10px);
}

.page-transition-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: opacity 300ms ease-out, transform 300ms ease-out;
}

.page-transition-exit {
  opacity: 1;
  transform: translateY(0);
}

.page-transition-exit-active {
  opacity: 0;
  transform: translateY(-10px);
  transition: opacity 200ms ease-in, transform 200ms ease-in;
}

/* ============================================
   Improved Button States
   ============================================ */
@layer components {
  /* Button press feedback */
  .btn,
  .liquid-btn,
  .liquid-btn-outline,
  .liquid-icon-btn {
    @apply transition-all duration-150;
    -webkit-tap-highlight-color: transparent;
  }
  
  .btn:active,
  .liquid-btn:active,
  .liquid-btn-outline:active,
  .liquid-icon-btn:active {
    transform: scale(0.97);
  }
  
  /* Disabled states */
  .btn:disabled,
  .liquid-btn:disabled,
  .liquid-btn-outline:disabled {
    @apply opacity-50 cursor-not-allowed;
    transform: none;
  }
}

/* ============================================
   Mobile Recording UI Polish
   ============================================ */
@layer components {
  /* Large record button for mobile */
  .record-btn-large {
    @apply w-20 h-20 sm:w-24 sm:h-24 rounded-full 
           flex items-center justify-center
           transition-all duration-200
           shadow-lg;
    -webkit-tap-highlight-color: transparent;
  }
  
  .record-btn-large:active {
    transform: scale(0.95);
  }
  
  .record-btn-large.recording {
    @apply animate-pulse bg-red-500;
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
    animation: recording-ring 1.5s ease-in-out infinite;
  }
  
  @keyframes recording-ring {
    0% {
      box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
    }
    70% {
      box-shadow: 0 0 0 20px rgba(239, 68, 68, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
    }
  }
  
  /* Audio level bars animation */
  .audio-level-bar {
    @apply w-1 sm:w-1.5 bg-gold-500 rounded-full transition-all duration-75;
  }
}

/* ============================================
   Modal & Sheet Mobile Optimization
   ============================================ */
@layer components {
  /* Full-height modal on mobile */
  .modal-mobile-full {
    @apply fixed inset-0 sm:inset-auto sm:relative;
    @apply sm:max-w-lg sm:mx-auto sm:my-8;
    @apply sm:rounded-3xl;
  }
  
  /* Bottom sheet handle */
  .sheet-handle {
    @apply w-10 h-1 bg-night-600 rounded-full mx-auto mt-3 mb-2;
  }
  
  /* Swipeable sheet */
  .swipeable-sheet {
    touch-action: pan-y;
    overscroll-behavior-y: contain;
  }
}

/* ============================================
   Improved Card Interactions
   ============================================ */
@layer components {
  /* Interactive card with better mobile feedback */
  .card-interactive {
    @apply transition-all duration-200 cursor-pointer;
    -webkit-tap-highlight-color: transparent;
  }
  
  .card-interactive:active {
    @apply scale-[0.98] opacity-90;
  }
  
  @media (hover: hover) {
    .card-interactive:hover {
      @apply scale-[1.01] shadow-lg;
    }
  }
}

/* ============================================
   Safe Area Helpers
   ============================================ */
@layer utilities {
  /* iOS notch-aware spacing */
  .pt-safe-top {
    padding-top: max(1rem, env(safe-area-inset-top));
  }
  
  .pb-safe-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
  
  /* Bottom nav clearance */
  .mb-nav {
    margin-bottom: calc(80px + env(safe-area-inset-bottom, 0px));
  }
  
  .pb-nav {
    padding-bottom: calc(100px + env(safe-area-inset-bottom, 0px));
  }
}

/* ============================================
   Lazy Loading Images
   ============================================ */
@layer utilities {
  /* Placeholder for loading images */
  .img-loading {
    @apply bg-night-800 animate-pulse;
  }
  
  /* Fade in when loaded */
  .img-loaded {
    animation: img-fade-in 0.3s ease-out;
  }
  
  @keyframes img-fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
}

/* ============================================
   Arabic Text Mobile Optimization
   ============================================ */
@layer components {
  /* Responsive Arabic text */
  .quran-text-responsive {
    font-family: var(--font-quran);
    direction: rtl;
    @apply text-xl sm:text-2xl md:text-3xl leading-[2.2] sm:leading-[2.5];
  }
  
  /* Word-by-word mobile optimization */
  .word-tap-target {
    @apply min-h-[44px] min-w-[32px] flex items-center justify-center
           px-1.5 sm:px-2 py-1 rounded-lg
           transition-colors duration-150;
    -webkit-tap-highlight-color: transparent;
  }
  
  .word-tap-target:active {
    @apply bg-gold-500/20;
  }
}

/* ============================================
   Onboarding Flow Polish
   ============================================ */
@layer components {
  /* Onboarding option cards */
  .onboarding-option {
    @apply w-full text-left p-4 rounded-2xl 
           transition-all duration-200
           min-h-[72px]
           border border-night-800/50
           bg-night-900/30;
    -webkit-tap-highlight-color: transparent;
  }
  
  .onboarding-option:active {
    @apply scale-[0.98];
  }
  
  .onboarding-option.selected {
    @apply border-gold-500/40 bg-gold-500/10;
    box-shadow: 0 0 20px rgba(201, 162, 39, 0.1);
  }
  
  /* Progress dots */
  .progress-dot {
    @apply w-2 h-2 rounded-full transition-all duration-300;
  }
  
  .progress-dot.active {
    @apply w-6 bg-gold-500;
  }
  
  .progress-dot.complete {
    @apply bg-sage-500;
  }
  
  .progress-dot.pending {
    @apply bg-night-700;
  }
}

/* ============================================
   PWA Standalone Mode Tweaks
   ============================================ */
@layer utilities {
  /* Disable pull-to-refresh in standalone mode */
  @media all and (display-mode: standalone) {
    html, body {
      overscroll-behavior-y: none;
    }
  }
  
  /* iOS standalone mode */
  @supports (-webkit-touch-callout: none) {
    .standalone-tweaks {
      /* Disable text selection on UI elements */
      -webkit-user-select: none;
      user-select: none;
    }
    
    .standalone-tweaks .quran-text,
    .standalone-tweaks .arabic-text,
    .standalone-tweaks [lang="ar"] {
      /* Allow text selection for Quran content */
      -webkit-user-select: text;
      user-select: text;
    }
  }
  
  /* Safe area utilities for notched phones */
  .safe-top {
    padding-top: max(1rem, env(safe-area-inset-top));
  }
  
  .safe-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
  
  .safe-left {
    padding-left: max(1rem, env(safe-area-inset-left));
  }
  
  .safe-right {
    padding-right: max(1rem, env(safe-area-inset-right));
  }
  
  .safe-all {
    padding-top: max(1rem, env(safe-area-inset-top));
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
  
  /* Fixed elements with safe areas */
  .fixed-safe-top {
    top: env(safe-area-inset-top);
  }
  
  .fixed-safe-bottom {
    bottom: env(safe-area-inset-bottom);
  }
  
  /* Splash screen loading state */
  .splash-screen {
    position: fixed;
    inset: 0;
    background: #0f1419;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  }
  
  .splash-logo {
    animation: pulse-glow 2s ease-in-out infinite;
  }
  
  @keyframes pulse-glow {
    0%, 100% {
      opacity: 1;
      filter: drop-shadow(0 0 10px rgba(201, 162, 39, 0.3));
    }
    50% {
      opacity: 0.8;
      filter: drop-shadow(0 0 20px rgba(201, 162, 39, 0.6));
    }
  }
}

/* ============================================
   Offline Mode Styles
   ============================================ */
@layer components {
  /* Cached content indicator */
  .cached-content::after {
    content: '';
    position: absolute;
    bottom: 4px;
    right: 4px;
    width: 8px;
    height: 8px;
    background: #22c55e;
    border-radius: 50%;
    box-shadow: 0 0 4px rgba(34, 197, 94, 0.5);
  }
  
  /* Offline badge */
  .offline-badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5 
           bg-amber-500/20 text-amber-400 
           text-xs font-medium rounded-full;
  }
  
  /* Connection status dot */
  .status-dot {
    @apply w-2 h-2 rounded-full;
  }
  
  .status-dot.online {
    @apply bg-green-400;
    animation: pulse-online 2s ease-in-out infinite;
  }
  
  .status-dot.offline {
    @apply bg-amber-400;
  }
  
  .status-dot.syncing {
    @apply bg-blue-400;
    animation: pulse-sync 1s ease-in-out infinite;
  }
  
  @keyframes pulse-online {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.4);
    }
    50% {
      box-shadow: 0 0 0 4px rgba(74, 222, 128, 0);
    }
  }
  
  @keyframes pulse-sync {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }
}

/* ============================================
   Accessibility Enhancements (WCAG 2.1 AA)
   ============================================ */

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  /* Disable all animations */
  .liquid-shimmer-text,
  .liquid-glow-pulse,
  .liquid-float,
  .audio-playing,
  .recording-active,
  .confetti-particle,
  .xp-animation,
  .splash-logo {
    animation: none !important;
  }
  
  /* Keep essential state changes but instant */
  .liquid-progress-fill {
    animation: none !important;
    transition: width 0.01ms !important;
  }
}

/* Focus Visible Ring - Consistent and visible */
@layer components {
  .focus-visible-ring {
    @apply outline-none;
  }
  
  .focus-visible-ring:focus-visible {
    outline: 2px solid rgba(201, 162, 39, 0.8);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(201, 162, 39, 0.2);
  }
  
  /* Alternative focus for dark backgrounds */
  .focus-visible-ring-light:focus-visible {
    outline: 2px solid rgba(255, 255, 255, 0.9);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.2);
  }
}

/* Touch Target Minimum Size (44x44 for WCAG) */
@layer components {
  .touch-target {
    min-width: 44px;
    min-height: 44px;
    @apply flex items-center justify-center;
  }
  
  /* Recording button with larger touch target */
  .record-btn-large {
    @apply w-24 h-24 rounded-full flex items-center justify-center
           shadow-lg transition-all duration-200;
    min-width: 96px;
    min-height: 96px;
  }
  
  .record-btn-large.recording {
    @apply bg-red-500 text-white;
    animation: recording-pulse 1.5s ease-in-out infinite;
  }
  
  @media (prefers-reduced-motion: reduce) {
    .record-btn-large.recording {
      animation: none;
      box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.4);
    }
  }
}

/* Audio Level Indicator (for screen readers) */
@layer components {
  .audio-level-bar {
    @apply w-1 bg-gold-500 rounded-full transition-all;
    min-height: 8px;
  }
}

/* Screen Reader Only (but not display:none) */
@layer utilities {
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
  
  .not-sr-only {
    position: static;
    width: auto;
    height: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
}

/* High Contrast Mode Support */
@media (prefers-contrast: more) {
  :root {
    --gold-leaf: #ffcc00;
    --gold-leaf-light: #ffdd44;
    --gold-leaf-dark: #cc9900;
  }
  
  .liquid-glass,
  .liquid-glass-subtle,
  .liquid-glass-strong,
  .liquid-glass-dark,
  .liquid-glass-gold {
    border-width: 2px !important;
  }
  
  .text-night-400,
  .text-night-500 {
    @apply text-night-300 !important;
  }
  
  button, a, [role="button"] {
    border: 1px solid currentColor !important;
  }
}

/* Forced Colors Mode (Windows High Contrast) */
@media (forced-colors: active) {
  .liquid-btn,
  .liquid-btn-outline {
    forced-color-adjust: none;
    background: ButtonFace;
    color: ButtonText;
    border: 2px solid ButtonText;
  }
  
  .liquid-btn:hover,
  .liquid-btn-outline:hover {
    background: Highlight;
    color: HighlightText;
  }
  
  .liquid-btn:focus-visible {
    outline: 3px solid Highlight;
  }
}

/* ARIA Live Regions */
@layer components {
  .live-region {
    @apply sr-only;
  }
  
  .live-region-visible {
    @apply fixed bottom-20 left-4 right-4 z-50
           bg-night-800 text-night-100 
           px-4 py-3 rounded-xl shadow-lg
           border border-night-700;
  }
}

/* Visible Focus for All Interactive Elements */
button:focus-visible,
a:focus-visible,
[role="button"]:focus-visible,
[tabindex]:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid rgba(201, 162, 39, 0.8);
  outline-offset: 2px;
}

/* Link Underlines for Better Visibility */
a:not(.liquid-btn):not(.liquid-btn-outline):not([class*="rounded"]) {
  text-decoration-line: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 2px;
}

a:not(.liquid-btn):not(.liquid-btn-outline):not([class*="rounded"]):hover {
  text-decoration-thickness: 2px;
}
